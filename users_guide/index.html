<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>What Is The Python Banyan? - Python Banyan</title>
    <link href="../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../js/jquery-3.2.1.min.js"></script>
    <script src="../js/bootstrap-3.3.7.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "What is Python Banyan?", url: "#_top", children: [
          ]},
          {title: "A Little More Detail About Python Banyan", url: "#a-little-more-detail-about-python-banyan", children: [
              {title: "Banyan Base Classes", url: "#banyan-base-classes" },
              {title: "Banyan Protocol Messages", url: "#banyan-protocol-messages" },
          ]},
          {title: "Where Is Python Banyan Being Used?", url: "#where-is-python-banyan-being-used", children: [
          ]},
          {title: "Banyan Application Design", url: "#banyan-application-design", children: [
              {title: "Some Design Guidelines", url: "#some-design-guidelines" },
          ]},
        ];

    </script>
    <script src="../js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../install/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../install/" class="btn btn-xs btn-link">
        Installation
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href=".." class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href=".." class="btn btn-xs btn-link">
        Welcome
      </a>
    </div>
    
  </div>

    

    <p></p>
<p align="center">
  <span style="color:#990033; font-family:Georgia; font-size:4em;">The Python Banyan</span>
</p>
<p align="center">
<span style="color:#990033; font-family:Georgia; font-size:4em;">User's Guide</span>
</p></p>
<hr />
<h1 id="what-is-python-banyan">What is Python Banyan?</h1>
<p>Python Banyan is a lightweight, <a href="https://gist.github.com/staltz/868e7e9bc2a7b8c1f754">reactive</a> framework used to
create <a href="http://ptgmedia.pearsoncmg.com/images/9780134602417/samplepages/9780134602417.pdf">flexible</a>, <a href="https://www.allthingsdistributed.com/historical/archives/000486.html">non-blocking, event
driven,
asynchronous</a> applications.
It was designed primarily to aid in the implementation of real-time physical computing applications
 for devices such as
 the Raspberry Pi, ESP8266,  and Arduino,
but may easily be applied to projects outside of the physical programming domain.</p>
<p>Banyan uses a <a href="https://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern">publish/subscribe</a>
 model that is similar to <a href="https://en.wikipedia.org/wiki/MQTT">MQTT</a>, but is much faster than MQTT in
 real-time control and data monitoring applications.
 A <a href="benchmark/#benchmark">benchmark comparison</a> of Banyan
and MQTT is provided later in this guide to illustrate Banyan's efficiency.
If your application requires connectivity to an MQTT broker, a <a href="example10">Gateway</a> is provided.</p>
<p>Most traditional physical computing libraries or frameworks use an <em>object oriented</em> model,
that yield a single,
tightly coupled, monolithic executable image. Python Banyan uses an extension of the object oriented model, called
the <em><a href="https://en.wikipedia.org/wiki/Component-based_software_engineering">component based</a> <a href="https://en.wikipedia.org/wiki/Service-oriented_architecture">service oriented architectural</a></em>
model. A <strong><em>component based</em></strong> application consists of a set of independent, loosely
coupled <strong><em>components</em></strong>, that communicate with one another through a set
of platform independent, user defined, protocol messages transmitted over a TCP network.</p>
<p>A Banyan application is composed of a set of <em>components</em> running concurrently as separate processes.
These <em>components</em> can be developed using a single language platform such as Python, or developed using any of the other Banyan frameworks.
There are versions of Banyan available for <a href="https://github.com/MrYsLab/js-banyan">JavaScript</a>, <a href="https://github.com/MrYsLab/rb_banyan">Ruby</a>,
 and <a href="https://github.com/MrYsLab/javabanyan">Java</a>. Components developed using dissimilar languages can be combined
 without modification, to form a single, cohesive application.</p>
<p>Banyan uses a central message distribution mechanism called the <strong><em>Backplane</em></strong>. When first starting a Banyan application,
the <em>Backplane</em> is brought on-line, followed by
the application's components.
At startup, each
 <em>component</em> automatically
"plugs" itself into the <em>Backplane</em> establishing a TCP/IP communication channel between itself and the Backplane.</p>
<p>After communication is established, components may publish messages <em>to</em> the Backplane, receive messages from other components or both
publish and receive messages. A major feature of Python Banyan
is that it has the capability to incorporate <a href="http://www.numpy.org/">Numpy</a> data into a protocol message
 seamlessly and easily.</p>
<p>Without modification, a Banyan application's components can run on a single computer or distributed across multiple computers.
This will be <a href="example3/">demonstrated later</a> on in this document.</p>
<h1 id="a-little-more-detail-about-python-banyan"><em>A Little More Detail About Python Banyan</em></h1>
<h2 id="banyan-base-classes">Banyan Base Classes</h2>
<p>All Banyan components are created by inheriting from one of the supplied Banyan base classes.
 The base class methods are overridden as needed to
 support the component's specific needs.</p>
<p>The base classes act as a wrapper for the <a href="http://zeromq.org/">ZeroMQ</a> embeddable networking library that has been configured
 to operate in a Publish/Subscribe networking pattern.
In addition, the base class encodes and decodes protocol messages for efficient network transmission,
using <a href="https://msgpack.org/index.html">MessagePack</a>.</p>
<h2 id="banyan-protocol-messages">Banyan Protocol Messages</h2>
<p>Banyan protocol messages consist of 2 parts, a "topic" and a "payload".</p>
<h3 id="the-topic-string">The Topic String</h3>
<p>A message topic consists of a simple string. To receive messages, a component
subscribes to one or more topics. A subscribing component receives all messages published
containing the desired topic.</p>
<h4 id="prefix-matching">Prefix Matching</h4>
<p>When a message is received, the topic is compared to the subscribed topic, and if it matches,
the message is placed on the component's receive queue. Any topic that begins with the subscribed topic string
is considered a match even if the received message topic contains additional text.
 For example, if you subscribe to the topic <strong>"abcd"</strong>, and a message is received
with a topic of <strong>"abcde"</strong>, the "abcde" message will be placed on the receive queue. Any messages that have topics
that begin with the subscribed topic string are considered a match even though the topic may contain additional text.</p>
<h3 id="the-message-payload">The Message Payload</h3>
<p>Message payloads consist of a Python dictionary type structure, containing one or more name/value items.
 By utilizing a dictionary, message data can be quickly de-referenced and processed.</p>
<p>Because Banyan messages are not computer language specific, components written in other computer Languages, such as
 JavaScript, can be used within a Python Banyan application. A simple <a href="example4/">JavaScript demo</a> is provided as one
 of the included examples.</p>
<h1 id="where-is-python-banyan-being-used">Where Is Python Banyan Being Used?</h1>
<p>Commercially, Python Banyan has been chosen by Palace Games in San Francisco to monitor and control
their <a href="https://palace-games.com/edison-escape-room/">Palace Games Edison Room</a>.
 The Edison room contains several hundred sensors and actuators, and Banyan helps tie all the devices
and their associated micro-controllers together, allowing them to
communicate quickly and transparently with one another. Banyan supports data transfers of Numpy data,
which the Edison
room uses to efficiently model their data. You can read about Palace Games on the
<a href="https://www.raspberrypi.org/blog/raspberry-pi-escape-room/">Raspberry Pi Blog</a>.</p>
<p>Banyan is also being used in numerous physical computing projects utilizing the Raspberry Pi, Arduino, and ESP8266.
An earlier version of Python Banyan, called <a href="https://github.com/MrYsLab/razmq">razmq</a>, was used to control a Raspberry Pi robot.</p>
<h1 id="banyan-application-design">Banyan Application Design</h1>
<p>When designing a Banyan Component, it is good practice to keep it as small as
possible. By limiting a component to a small area of concern, testing is greatly
simplified and the potential for component reuse increases.</p>
<h2 id="some-design-guidelines">Some Design Guidelines</h2>
<ul>
<li>
<p>A component should subscribe to the minimal number of message topics as possible.</p>
</li>
<li>
<p>Keep messages as short as possible.</p>
</li>
<li>
<p>Limit the component to its task at hand. For example if you wish to log application activity,
create a specific logging component. All other components can take advantage of this logging facility
in a consistent fashion. It also offloads logging I/O from the main component, promoting higher performance
for the system as a whole.</p>
</li>
</ul>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../install/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../install/" class="btn btn-xs btn-link">
        Installation
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href=".." class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href=".." class="btn btn-xs btn-link">
        Welcome
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="col-md-12 wm-page-content">
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>