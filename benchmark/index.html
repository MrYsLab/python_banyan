


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-5.1.6">
    
    
      
        <title>Comparing Banyan and MQTT - Python Banyan</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4b9ffd7b.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#benchmarking-banyan-and-mqtt" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="Python Banyan" class="md-header-nav__button md-logo" aria-label="Python Banyan">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Python Banyan
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Comparing Banyan and MQTT
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Python Banyan" class="md-nav__button md-logo" aria-label="Python Banyan">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Python Banyan
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Welcome" class="md-nav__link">
      Welcome
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      User's Guide
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="User's Guide" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        User's Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../users_guide/" title="What Is Python Banyan?" class="md-nav__link">
      What Is Python Banyan?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../install/" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../examples_intro/" title="Introduction To The Tutorials" class="md-nav__link">
      Introduction To The Tutorials
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api/" title="Base Class API Reference" class="md-nav__link">
      Base Class API Reference
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../example1/" title="Tutorial 1 - A Simple Echo Server/Client" class="md-nav__link">
      Tutorial 1  - A Simple Echo Server/Client
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../example2/" title="Tutorial 2 - Adding Command Line Options To A Component" class="md-nav__link">
      Tutorial 2  - Adding Command Line Options To A Component
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../example3/" title="Tutorial 3 - Distributed Applications" class="md-nav__link">
      Tutorial 3  - Distributed Applications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../example4/" title="Tutorial 4 - Applications From Components On Differing Platforms" class="md-nav__link">
      Tutorial 4  - Applications From Components On Differing Platforms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../example5/" title="Tutorial 5 - Debugging Using The Monitor" class="md-nav__link">
      Tutorial 5  - Debugging Using The Monitor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../example6/" title="Tutorial 6 - Integrating With A GUI Event Loop" class="md-nav__link">
      Tutorial 6  - Integrating With A GUI Event Loop
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../example7/" title="Tutorial 7 - Installing Components As Executable Modules" class="md-nav__link">
      Tutorial 7  - Installing Components As Executable Modules
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../example8/" title="Tutorial 8 - Using the Banyan Launcher" class="md-nav__link">
      Tutorial 8  - Using the Banyan Launcher
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../example9/" title="Tutorial 9 - Connecting To Multiple Backplanes" class="md-nav__link">
      Tutorial 9  - Connecting To Multiple Backplanes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../example10/" title="Tutorial 10 - Connecting Banyan To An MQTT Network" class="md-nav__link">
      Tutorial 10 - Connecting Banyan To An MQTT Network
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../example11/" title="Tutorial 11 - Physical Computing And GPIO" class="md-nav__link">
      Tutorial 11 - Physical Computing And GPIO
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Comparing Banyan and MQTT
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="Comparing Banyan and MQTT" class="md-nav__link md-nav__link--active">
      Comparing Banyan and MQTT
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#testing-environment" class="md-nav__link">
    Testing Environment
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-mqtt" class="md-nav__link">
    Using MQTT
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-python-banyan" class="md-nav__link">
    Using Python Banyan
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-the-benchmarks-on-a-raspberry-pi" class="md-nav__link">
    Running the Benchmarks On A Raspberry Pi
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../about/" title="About" class="md-nav__link">
      About
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      The OneGPIO Project
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="The OneGPIO Project" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        The OneGPIO Project
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../gpio_intro/" title="Introducing OneGPIO" class="md-nav__link">
      Introducing OneGPIO
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../common_messaging_protocol/" title="The OneGPIO Messaging Protocol" class="md-nav__link">
      The OneGPIO Messaging Protocol
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../banyan_gateways/" title="An Introduction To OneGPIO Gateways" class="md-nav__link">
      An Introduction To OneGPIO Gateways
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../additional_gateways/" title="Additional Banyan Gateways" class="md-nav__link">
      Additional Banyan Gateways
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../one_gpio_demos/" title="OneGPIO Demos" class="md-nav__link">
      OneGPIO Demos
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#testing-environment" class="md-nav__link">
    Testing Environment
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-mqtt" class="md-nav__link">
    Using MQTT
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-python-banyan" class="md-nav__link">
    Using Python Banyan
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-the-benchmarks-on-a-raspberry-pi" class="md-nav__link">
    Running the Benchmarks On A Raspberry Pi
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                <h1 id="benchmarking-banyan-and-mqtt">Benchmarking Banyan and MQTT</h1>
<p>MQTT is an excellent tool if used for what it is designed - that is, publishing messages across the greater Internet.
But when traffic is limited to within a given LAN, MQTT is highly inefficient.</p>
<p>We ran a simple benchmark comparing MQTT to Python Banyan.
For each framework, the benchmark consists of a publisher that publishes 100000 messages and a subscriber that receives those messages.
The total transfer time is calculated for each, and total latency between the publisher and subscriber is explored.</p>
<p>To view the benchmark code, click on these links:</p>
<ul>
<li><a href="https://github.com/MrYsLab/python_banyan/blob/master/python_banyan/performance_comparison/mqsub.py">MQTT subscriber</a>,</li>
<li><a href="https://github.com/MrYsLab/python_banyan/blob/master/python_banyan/performance_comparison/mqpub.py">MQTT publisher</a>,</li>
<li><a href="https://github.com/MrYsLab/python_banyan/blob/master/python_banyan/performance_comparison/banyan_sub.py">Python Banyan subscriber</a>,</li>
<li><a href="https://github.com/MrYsLab/python_banyan/blob/master/python_banyan/performance_comparison/banyan_pub.py">Python Banyan publisher</a>.</li>
</ul>
<h2 id="testing-environment">Testing Environment</h2>
<p>All tests were run on Ubuntu Linux 18.10 on a computer using
an Intel Core i5-2500K CPU running at 3.30GHz.</p>
<p>Python 3.7.2 compiled with the --enable_optimizations flag set was used for both
tests.</p>
<p>Mosquitto version 1.4.15 and paho version 1.3.1 was used for the MQTT tests.</p>
<h2 id="using-mqtt">Using MQTT</h2>
<p>Here are the MQTT test results for the subscriber:</p>
<pre><code>$ python3 mqsub.py
MQSUB Connected - Expecting 100000 Messages
Task completed on:  Wed Feb 13 17:27:25 2019
100000 Total messages received in 4.819453239440918 seconds.
</code></pre>

<p>And here are the results for the MQTT publisher:</p>
<pre><code>$ python mqpub.py
MQPUB Connected - Sending 100000 messages
Task completed on:  Wed Feb 13 17:27:24 2019

</code></pre>

<p>We can see that it took a little over 4.18 seconds to send and receive the 100000 messages.</p>
<h2 id="using-python-banyan">Using Python Banyan</h2>
<p>Here are the Banyan subscriber results:</p>
<pre><code>$ python3 banyan_sub.py

************************************************************
Banyan Subscriber using Back Plane IP address: 192.168.2.189
Subscriber Port = 43125
Publisher  Port = 43124
Loop Time = 0.1 seconds
************************************************************
Expecting 100000 messages.
Task completed at:  Wed Feb 13 17:38:42 2019
100000 Total messages received in 1.695580244064331 seconds.
</code></pre>

<p>Here are the Banyan publisher results:</p>
<pre><code>$ python3 banyan_pub.py

************************************************************
Banyan publisher using Back Plane IP address: 192.168.2.189
Subscriber Port = 43125
Publisher  Port = 43124
Loop Time = 0.1 seconds
************************************************************
Publishing 100000 messages.
Task completed at:  Wed Feb 13 17:38:42 2019

</code></pre>

<p>Looking at the results, Python Banyan was almost 2.5 times faster than the MQTT.
What is more interesting is the latency between the publishers' and subscribers' completions.
Looking at the time stamps reported, MQTT had a latency of 1 second, while Banyan had a latency of 0 seconds.</p>
<h2 id="running-the-benchmarks-on-a-raspberry-pi">Running the Benchmarks On A Raspberry Pi</h2>
<p>The tests were also run on a Raspberry Pi 3 with Raspbian Stretch March 2018 release
updated and upgraded on February 14, 2019.
Python 3.6.4 was used for all tests.</p>
<p>Mosquitto version 1.4.15 and paho version 1.3.1 were used for the MQTT tests.</p>
<p>In this case, MQTT took a little over 36 seconds to complete, and Banyan a little over 17.</p>
<p>Latency for MQTT was approximately 7 seconds, and for Banyan, approximately 1 second. </p>
<p><br>
<br>
Copyright (C) 2017-2020 Alan Yorinks All Rights Reserved</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../example11/" title="Tutorial 11 - Physical Computing And GPIO" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Tutorial 11 - Physical Computing And GPIO
              </div>
            </div>
          </a>
        
        
          <a href="../about/" title="About" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                About
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.a0c4167b.min.js"></script>
      <script src="../assets/javascripts/bundle.fb26dd1d.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.37585f48.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>